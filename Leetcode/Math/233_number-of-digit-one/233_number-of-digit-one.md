#### [233. 数字 1 的个数](https://leetcode-cn.com/problems/number-of-digit-one/)

> #中～难 #面试题
>
> #数学 #归纳法 #逻辑简化 #公式  #公式转程序

给定一个整数 `n`，计算所有小于等于 `n` 的非负整数中数字 `1` 出现的个数。

**示例 1：**

```
输入：n = 13
输出：6
```

**示例 2：**

```
输入：n = 0
输出：0 
```

**提示：**

- `0 <= n <= 109`



# 解题思路

## 1.方法一：枚举法（归纳出数学公式）

> 以n=1234567为例，想统计百位的1一共出现多少次

1. 1234**0**00的百位一共出现了1234 x 100 次1

   - 因为`[100,199]`出现了100次百位的1，如1231**1**00～1231**1**99的区间也出现了100次1
   - 以此类推，1**0**00～1234**0**00一共出现了1234 x 100次的1

2. 分析剩余位567中百位出现1的次数：

   > 记`n'=567`，则`n'=n%1000-100+1`

   - n' < 100，出现0次
   - 100 ≤ n' < 200，出现n' - 100 + 1 次
   - 200 < n'，出现100次

3. 百位出现1的次数用公式总结是：
   $$
   ⌊1000n​⌋×100+min(max(nmod1000−100+1,0),100)
   $$

4. 推广到其他位（个、十、千...位）用公式表示就是

$$
⌊10k+1n​⌋×10k+min(max(nmod10k+1−10k+1,0),10k)
$$

### 1.2 编程

#### 1.2.1 数据结构

- `int k = 0`：在循环程序标记"个"、"十"、"百"、"千"...的作用

  - 在程序中的for循环中起到了一个计数的作用

  - 理解为0代表为个位，1代表十位，2代表百位，以此类推

- `int mulk = 1`：是k的辅助变量，同时在公式中替代k的作用
  - 在公式中起到了替代k的作用，更为方便💡

- `int sum = 0`：统计结果

#### 1.2.2 算法流程

1. 循环体：从个位到最高位遍历

   1. 个位统计一共出现过多少次1（即执行一次公式）

      > 百位、千位以此类推

   2. 累加次数到sum

2. 返回sum

#### 1.2.3 代码实现

##### 💡公式→程序的简化

- 当 n' < 100时，n'-100 + 1的值小于等于0，而我们希望等于0

  - 因此有`max(n_1 - mulk + 1, 0)`

- 当 n' ≥ 200时，n' - 100 + 1的值大于100，而我们希望得到100的答案

  - 因此有`min(res, mulk)`
  - 其中 res是上一步0 ≤ x ≤ mulk的一个值

- 综合来看可以写成：

  ​	`min(max(n_1 - mulk + 1, 0), mulk)`

```C++
def countDigitOne(self, n: int) -> int:
    """
    给定一个整数 n，计算所有小于等于 n 的非负整数中数字 1 出现的个数。
    《枚举法》
    :param n: 一个整数
    :return: 所有小于等于 n 的非负整数中数字 1 出现的个数
    """
    k, mulk, = 0, 1  # k是没有作用的，只是从C++代码迁移过来表示从0开始的位
    sum = 0
    while n >= mulk:
        k += 1
        n_1 = n % (mulk * 10)
        sum += n // (mulk * 10) * mulk + min(max(n_1 - mulk + 1, 0), mulk)
        mulk *= 10
    return sum
```

### 1.2 复杂度分析

- 时间复杂度：$O(log n)$。n包含的数位个数与 *n* 呈对数关系

- 空间复杂度：$O(1)$


# 总结

- 归纳数学公式的思想
  - 先总结百位上出现1的规律
  - 然后推广到一般位（十、千、万...）上出现1的规律
  - 对任意一个数字可以综合运用一个通用的公式得到求解
- 使用`max()`和`min()`实现公示转程序的妙用🐱
- python的整除运算符是： `//`
- mulk在程序中不仅起到位数的计数器，也替代了k起到了在程序中作为k的变量的作用（更方便）